cmake_minimum_required(VERSION 3.4)

# set default build type cache entry (do so before project(...) is called, which would create this cache entry on its own)
set(CMAKE_BUILD_TYPE_Values "None;Debug;Release;RelWithDebInfo;MinSizeRel" CACHE INTERNAL "List of possible build type")
# Combobox to avoid erroneous value (in cmake-gui)
# https://blog.kitware.com/constraining-values-with-comboboxes-in-cmake-cmake-gui
set(CMAKE_BUILD_TYPE "Release" CACHE STRING "Choose the type of build, options are: None(CMAKE_CXX_FLAGS or CMAKE_C_FLAGS used) Debug Release RelWithDebInfo MinSizeRel.")
set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS ${CMAKE_BUILD_TYPE_Values})
if(NOT CMAKE_BUILD_TYPE IN_LIST CMAKE_BUILD_TYPE_Values)
	message(FATAL_ERROR "CMAKE_BUILD_TYPE must be one of ${CMAKE_BUILD_TYPE_Values}")
endif()
message(STATUS "setting build type: ${CMAKE_BUILD_TYPE}")

project(FESOM2.0)
set(TOPLEVEL_DIR ${CMAKE_CURRENT_LIST_DIR})
set(CMAKE_MODULE_PATH ${CMAKE_CURRENT_LIST_DIR}/cmake)
set(FESOM_COUPLED OFF CACHE BOOL "compile fesom standalone or with oasis support (i.e. coupled)")
set(OIFS_COUPLED OFF CACHE BOOL "compile fesom coupled to OpenIFS. Also needs FESOM_COUPLED to work)")
set(CRAY OFF CACHE BOOL "compile with cray ftn")
option(FESOM_OPENACC "compile fesom with OpenACC (PGI only)" False)
#set(VERBOSE OFF CACHE BOOL "toggle debug output")
#add_subdirectory(oasis3-mct/lib/psmile)
add_subdirectory(src)
